# Config Tool Module

**Source:** `jsktoolbox/configtool`

**High-Level Introduction:**
The Config Tool package orchestrates reading and writing INI-like configuration files. It splits responsibilities across data models, filesystem helpers, and a high-level facade that converts raw lines into typed Python structures.

## Getting Started

Instantiate the `Config` class with a file path and primary section. Use `set`/`get` to mutate values, then call `save` to persist.

```python
from jsktoolbox.configtool.main import Config

config = Config("/tmp/app.ini", "main", auto_create=True)
config.set("main", "enabled", value=True)
config.save()
```

---

## `VariableModel` Class

**Class Introduction:**
Represents a single configuration variable capturing its name, value, and optional description.

### `VariableModel.value`

**Detailed Description:**
Property wrapper around the stored payload. Supports strings, numbers, booleans, and lists while enforcing declared types.

**Signature:**

```python
@property
def value(self) -> Optional[Union[str, int, float, bool, List]]
@value.setter
def value(self, value: Optional[Union[str, int, float, bool, List]]) -> None
```

- **Returns:**
  - `Optional[Union[str, int, float, bool, List]]` - Raw value.
- **Raises:**
  - `TypeError`: When assignment violates type constraints inherited from `BData`.

**Usage Example:**

```python
var = VariableModel(name="timeout", value=30, desc="seconds")
var.value = 45
```

---

## `SectionModel` Class

**Class Introduction:**
Groups variables and comments under a named section, mirroring INI headers.

### `SectionModel.set_variable()`

**Detailed Description:**
Adds or updates a variable while reusing existing instances when names match. Raising validation errors for missing identifiers prevents malformed output.

**Signature:**

```python
def set_variable(self, name: Optional[str] = None,
                 value: Optional[Any] = None,
                 desc: Optional[str] = None) -> None
```

- **Arguments:**
  - `name: Optional[str]` - Variable identifier (required when `value` is provided).
  - `value: Optional[Any]` - Payload to store.
  - `desc: Optional[str]` - Optional inline comment.
- **Raises:**
  - `ValueError`: Missing name alongside a value.

**Usage Example:**

```python
section = SectionModel("network")
section.set_variable("host", "localhost", desc="default host")
```

---

## `DataProcessor` Class

**Class Introduction:**
Maintains the collection of sections and variables, enabling structured access and formatted output.

### `DataProcessor.dump`

**Detailed Description:**
Serialises the configuration into an INI-style string. Requires a designated main section to anchor ordering.

**Signature:**

```python
@property
def dump(self) -> str
```

- **Returns:**
  - `str` - Final configuration representation.
- **Raises:**
  - `KeyError`: Main section not established before dumping.

**Usage Example:**

```python
processor = DataProcessor()
processor.main_section = "general"
processor.set("general", "enabled", value=True)
print(processor.dump)
```

---

## `FileProcessor` Class

**Class Introduction:**
Encapsulates filesystem operations, providing safe creation and IO routines guarded by `PathChecker` validation.

### `FileProcessor.readlines()`

**Detailed Description:**
Reads file contents into stripped lines while filtering internal end-of-section markers generated by the dumper.

**Signature:**

```python
def readlines(self) -> List[str]
```

- **Returns:**
  - `List[str]` - Sanitised list of lines.
- **Raises:**
  - `AttributeError`: Invoked before a path is configured.

**Usage Example:**

```python
fp = FileProcessor()
fp.file = "/tmp/app.ini"
lines = fp.readlines()
```

---

## `Config` Class

**Class Introduction:**
High-level faÃ§ade combining file and data processors to parse, modify, and emit configuration files.

### `Config.load()`

**Detailed Description:**
Parses the configuration file line by line, populating the underlying `DataProcessor` while converting values to native types.

**Signature:**

```python
def load(self) -> bool
```

- **Returns:**
  - `bool` - True once the file has been processed.
- **Raises:**
  - `ValueError`: Encountered malformed configuration line.

**Usage Example:**

```python
cfg = Config("/tmp/app.ini", "main")
cfg.load()
port = cfg.get("main", "port")
```

```

```
